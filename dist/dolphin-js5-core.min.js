function Namespace(){}var Dolphin,Polyfill;Namespace.prototype={constructor:Namespace,traverse:function(n,t){var i,r,f,u,e;if(n.trim()==="")return this;for(i=n.split("."),r=0;r<i.length;r+=1){if(f=i[r].trim(),f==="")throw new Error("Invalid namespace");i[r]=f}return u=this,e=function(n){u=t(u,n)},i.forEach(e),u},namespace:function(n){return this.traverse(n,function(n,t){return n[t]=n[t]||{},n[t]})},reflection:function(n){return this.traverse(n,function(n,t){return n[t]})}};Dolphin=new Namespace;Dolphin.new=function(n){var t=Array.prototype.slice.call(arguments),i;return t.shift(),t.unshift(null),i=new(Function.prototype.bind.apply(n,t)),i.__className__=n.name,i};Dolphin.newWithArgs=function(n,t){var i=Array.prototype.slice.call(t);return i.unshift(n),Dolphin.new.apply(null,i)};Polyfill={};Polyfill.fill=function(){return Array.fill?Array.fill:function(n){if(this==null)throw new TypeError("this is null or not defined");for(var i=Object(this),t=i.length>>>0,o=arguments[1],r=o>>0,u=r<0?Math.max(t+r,0):Math.min(r,t),e=arguments[2],f=e===undefined?t:e>>0,s=f<0?Math.max(t+f,0):Math.min(f,t);u<s;)i[u]=n,u++;return i}}();Dolphin.ExceptionFactory=function(n){function t(t){this.message=t||"ExceptionFactory: Error";this.name=n||"ExceptionFactory";this.stack=(new Error).stack}return t.prototype=Object.create(Error.prototype),t.constructor=t,t};Dolphin.AssertException=new Dolphin.ExceptionFactory("AssertException");Dolphin.ArgumentException=new Dolphin.ExceptionFactory("ArgumentException");Dolphin.NullException=new Dolphin.ExceptionFactory("NullException");Dolphin.IndexException=new Dolphin.ExceptionFactory("IndexException");Dolphin.NamespaceException=new Dolphin.ExceptionFactory("NamespaceException");Dolphin.Types={Array:"Array",Boolean:"Boolean",Date:"Date",Function:"Function",Null:"Null",Number:"Number",Object:"Object",RegExp:"RegExp",String:"String",Undefined:"Undefined"};Dolphin.Type=function(){function y(n,t,i,u){var f={enumerable:!0,configurable:!1};i&&r(i)&&(f.get=i);u&&r(u)&&(f.set=u);Object.defineProperty(n,t,f)}function n(n){return Object.prototype.toString.call(n).slice(8,-1)}function i(i){return n(i)===t.Array}function p(i){return n(i)===t.Boolean}function w(i){return n(i)===t.Date}function r(i){return n(i)===t.Function}function f(i){return n(i)===t.Null}function e(i){return n(i)===t.Number}function o(i){return n(i)===t.Object}function b(i){return n(i)===t.RegExp}function k(i){return n(i)===t.String}function u(i){return n(i)===t.Undefined}function s(i){return n(i)!==t.Array}function d(i){return n(i)!==t.Boolean}function g(i){return n(i)!==t.Date}function nt(i){return n(i)!==t.Function}function tt(i){return n(i)!==t.Null}function it(i){return n(i)!==t.Number}function rt(i){return n(i)!==t.Object}function ut(i){return n(i)!==t.RegExp}function ft(i){return n(i)!==t.String}function et(i){return n(i)!==t.Undefined}function ot(n){return n===0}function st(n){return e(n)&&n>=0}function ht(n){return e(n)&&n<0}function h(n){return f(n)||u(n)}function ct(n){return!f(n)&&!u(n)}function c(t,i){return n(t)===n(i)}function l(n,t){if(!c(n,t))return!1;if(r(n))return n.toString()===t.toString();if(!(n instanceof Object)&&!(t instanceof Object))return n===t;for(var f=Object.keys(n||{}),u,i=0;i<=f.length;i+=1)if(u=f[i],!l(n[u],t[u]))return!1;return!0}function a(){for(var t,i={},n=0;n<arguments.length;n++)(t=arguments[n],t)&&v(i,t);return i}function v(n,t){function r(n,t,r){var u=o(t[r])||i(t[r]);return(u||h(t[r]))&&o(n[r])}function f(n,t,i){var r=Object.getOwnPropertyDescriptor(n,i);r.configurable&&Object.defineProperty(t,i,r)}function e(n,t,r){u(t[r])&&(t[r]=i(n[r])?[]:{});s(t[r])&&i(n[r])?t[r]=[]:i(t[r])&&s(n[r])&&(t[r]={});t[r]=a(t[r],n[r])}return Object.getOwnPropertyNames(t).forEach(function(i){var u=r(t,n,i)?e:f;u(t,n,i)}),n}function lt(n,t){n.prototype=Object.create(t.prototype)}function at(n){var i=Dolphin.Assert,t,r;for(i.isTrue(arguments.length>=2),i.isFunction(n),t=1;t<arguments.length;t++)r=arguments[t],i.isFunction(r),r.call(n.prototype)}function vt(n){function u(){if(i<r){var u=t[i++];return{value:n[u],done:!1}}return{value:void 0,done:!0}}var t=Object.keys(n),r=t.length,i=0;return{next:u}}function yt(n){return Object.keys(n||{}).sort()}var t=Dolphin.Types;return{defineProperty:y,getType:n,isArray:i,isBoolean:p,isDate:w,isFunction:r,isNull:f,isNumber:e,isObject:o,isRegExp:b,isString:k,isUndefined:u,isNotArray:s,isNotBoolean:d,isNotDate:g,isNotFunction:nt,isNotNull:tt,isNotNumber:it,isNotObject:rt,isNotRegExp:ut,isNotString:ft,isNotUndefined:et,isZero:ot,isGreatThanZero:st,isSmallThanZero:ht,isNullOrUndefined:h,isNotNullOrUndefined:ct,sameType:c,deepEqual:l,merge:a,extend:v,inherit:lt,mixin:at,iterator:vt,getSortedKeys:yt}}();Dolphin.Assert=function(){function n(n,t){var i=n===null||n===undefined?Dolphin.AssertException:n;throw new i(t||"");}function i(i,r,u){t.isArray(i)||n(u,r)}function r(i,r,u){t.isBoolean(i)||n(u,r)}function u(i,r,u){t.isDate(i)||n(u,r)}function f(i,r,u){t.isFunction(i)||n(u,r)}function e(i,r,u){t.isNull(i)||n(u,r)}function o(i,r,u){t.isNumber(i)||n(u,r)}function s(i,r,u){t.isObject(i)||n(u,r)}function h(i,r,u){t.isRegExp(i)||n(u,r)}function c(i,r,u){t.isString(i)||n(u,r)}function l(i,r,u){t.isUndefined(i)||n(u,r)}function a(i,r,u){t.isArray(i)&&n(u,r)}function v(i,r,u){t.isBoolean(i)&&n(u,r)}function y(i,r,u){t.isDate(i)&&n(u,r)}function p(i,r,u){t.isFunction(i)&&n(u,r)}function w(i,r,u){t.isNull(i)&&n(u,r)}function b(i,r,u){t.isNumber(i)&&n(u,r)}function k(i,r,u){t.isObject(i)&&n(u,r)}function d(i,r,u){t.isRegExp(i)&&n(u,r)}function g(i,r,u){t.isString(i)&&n(u,r)}function nt(i,r,u){t.isUndefined(i)&&n(u,r)}function tt(i,r,u,f,e){(t.isNullOrUndefined(u)||u<i||u>r)&&n(Dolphin.IndexException||e,f||"索引 "+u+" 超出範圍 "+i+","+r)}function it(t,i,r){t||n(r,i||"條件必須是 True")}function rt(i,r,u,f){i instanceof r||n(f,u||t.getType(i)+" 必須是 "+t.getType(r)+" 的實例")}function ut(i,r,u){t.isString(i)||n(u,"物件不是字串");i.length===0&&n(u,r||"字串必須有值")}function ft(i,r,u){t.isNotString(i)&&n(u,"物件不是字串");i.length!==0&&n(u,r||"字串必須無值")}function et(i,r,u,f){t.deepEqual(i,r)||n(f,u||"參數 obj 與 other 必須相同")}function ot(i,r,u,f){t.deepEqual(i,r)&&n(f,u||"參數 obj 與 other 必須不相同")}function st(t,i,r,u){t.hasOwnProperty(i)||n(u,r||"物件沒有鍵值 "+i)}function ht(i,r,u){t.isNotNullOrUndefined(i)&&n(u,r)}function ct(i,r,u){t.isNullOrUndefined(i)&&n(u||Dolphin.NullException,r)}var t=Dolphin.Type;return{hasKey:st,ensureIndex:tt,isArray:i,isBoolean:r,isDate:u,isEmptyString:ft,isEqual:et,isFunction:f,isInstanceOf:rt,isNotArray:a,isNotBoolean:v,isNotDate:y,isNotEmptyString:ut,isNotEqual:ot,isNotFunction:p,isNotNull:w,isNotNullOrUndefined:ct,isNotNumber:b,isNotObject:k,isNotRegExp:d,isNotString:g,isNotUndefined:nt,isNull:e,isNullOrUndefined:ht,isNumber:o,isObject:s,isRegExp:h,isString:c,isTrue:it,isUndefined:l}}();Dolphin.Observable=function(n){function u(n,t,u){var e=t[u];r.isObject(e)&&i(n===""?u:n+"."+u,e);Object.defineProperty(t,u,{get:function(){return e},set:function(t){if(t!==e){e=t;var i=(n===""?"":n+".")+u;f(i,t)}},enumerable:!0,configurable:!1})}function f(n,i){var r=t["*"]||[],u=(t[n]||[]).filter(function(n){return r.indexOf(n)===-1});return r.concat(u).forEach(function(t){try{t(n,i)}catch(r){console.log(r)}}),this}function i(n,t){Object.keys(t).forEach(function(i){u(n,t,i)})}function e(n,i){var r=t[n]||[],u=r.indexOf(i);return u>=0&&(t[n]=r.slice(u,1)),this}function o(n,i){var r=t[n]||[];return t[n]=r,r.push(i),this}var r=Dolphin.Type,t={};return i("",n||{}),{unwatch:e,watch:o}};Dolphin.StrUtils=function(){function n(n){throw new i(n);}function r(i){var f,u,r,e;for(arguments.length<2&&n("至少要有二個參數"),t.isNullOrUndefined(i)&&n("未指定 template"),f=i.match(/{([0-9]+)}/gi),t.isNullOrUndefined(f)&&n("未在指模板裡面設定變數"),f.length!==arguments.length-1&&n("變數與參數的數目不相同"),u=i,r=1;r<arguments.length;r++)e=new RegExp("\\{"+r+"\\}","gi"),e.test(i)||n("在模板裡面沒有 "+r+1+" 的變數"),u=u.replace(e,arguments[r]);return u}function u(n,t,i){var r=n;if(r.length>=i)return r;while(r.length<i)r=t+r;return r}function f(i,r){return(arguments.length<2||r<0||t.isNullOrUndefined(i))&&n("參數錯誤"),new Array(r+1).join(i)}function e(n,t){for(var i=n;i.indexOf(t)===0;)i=i.substr(t.length);return i}function o(n,t){var r=new RegExp("^"+t+"*","g"),i=n.match(r)||[];return i.length>0?i[0].length:0}function s(n,t,i){return n.substr(!i||i<0?0:+i,t.length)===t}var t=Dolphin.Type,i=Dolphin.ArgumentException;return{format:r,rightPad:u,repeat:f,remove:e,occurrences:o,startsWith:s}}();Dolphin.Log=function(n){function u(n,t,i){this.errorLevel=n;this.timeStamp=i;this.message=t}function r(){}function t(){this.appenders=[]}var i;return r.prototype.append=function(t){n.log(t.timeStamp.toISOString()+" "+t.message)},t.prototype.addAppender=function(n){this.appenders.push(n)},t.prototype.appendMessage=function(n,t){var i=new u(n,t,new Date);this.appenders.forEach(function(n){n.append(i)})},Object.keys({all:1,debug:2,info:3,warn:4,error:5,fatal:6,off:7,trace:8}).forEach(function(n){t.prototype[n]=function(t){this.appendMessage(n,t)}}),i=new t,i.addAppender(new r),i}(console);Dolphin.DataBinding=function(n,t){function f(){return r}function u(n){var t,u;for(r=n,t=0;t<i.length;t++)u=i[t],u.element[u.attribute]=n}function e(n,t,f){Dolphin.Assert.isNotNull(n);var e={element:n,attribute:t};return f&&(n.addEventListener(f,function(){u(n[t])}),e.event=f),i.push(e),n[t]=r,this}var i=[],r=n[t];return Object.defineProperty(n,t,{get:f,set:u}),{attach:e}};Dolphin.AutoMapper=function(){function u(i){var r=t.isFunction(i)?i.name:i;return n.isNotEmptyString(r,"getKey 的結果不可以為空字串"),r}function f(n,t){return u(n)+"->"+u(t)}function e(t,r){var u=f(t,r),e;return i[u]={},e={forMember:function(t,r){n.isNotEmptyString(t,"參數 property 必須有值");var f=i[u];return n.isNotNullOrUndefined(f),f[t]=r,e}}}function o(u,e,o,s){var c,h;if(n.isNotNullOrUndefined(o),n.isNotNullOrUndefined(s),c=f(u,e),t.isNullOrUndefined(i[c]))throw new Error("尚未定義 "+u+" 與 "+e+" 之間的對應關係");h=i[c];n.isNotNullOrUndefined(h);Object.getOwnPropertyNames(o).forEach(function(n){if(t.isNullOrUndefined(h[n])){s[n]=o[n];return}var i=h[n];switch(t.getType(i)){case r.Function:i(o,s);break;case r.String:s[i]=o[n]}})}var n=Dolphin.Assert,t=Dolphin.Type,r=Dolphin.Types,i={},s={createMap:e,map:o};return Object.freeze(s)};
//# sourceMappingURL=dolphin-js5-core.min.js.map